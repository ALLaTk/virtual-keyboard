(()=>{"use strict";const e=class{constructor(e,t,n){this.element=document.createElement(t),this.element.className=n,e.append(this.element)}destroy(){this.node.remove()}};class t extends e{constructor(t){super(t,"div","header"),this.titlle=new e(this.element,"h1","titlle"),this.titlle.element.textContent="Virtual Keyboard",this.subtitlle=new e(this.element,"h2","subtitlle"),this.subtitlle.element.textContent="for Windows OS",this.subtitlle_second=new e(this.element,"h3","subtitlle_second"),this.subtitlle_second.element.textContent="Change launguages: left Alt + left Ctrl"}}class n extends e{constructor(e){super(e,"textarea","text__content")}}const s=[[{key:{ru:"ё",en:"`"},shift:{ru:"Ё",en:"~"},code:"Backquote",class:"key"},{key:{ru:"1",en:"1"},shift:{ru:"!",en:"!"},code:"Digit1",class:"key"},{key:{ru:"2",en:"2"},shift:{ru:'"',en:"@"},code:"Digit2",class:"key"},{key:{ru:"3",en:"3"},shift:{ru:"№",en:"#"},code:"Digit3",class:"key"},{key:{ru:"4",en:"4"},shift:{ru:";",en:"$"},code:"Digit4",class:"key"},{key:{ru:"5",en:"5"},shift:{ru:"%",en:"%"},code:"Digit5",class:"key"},{key:{ru:"6",en:"6"},shift:{ru:":",en:"^"},code:"Digit6",class:"key"},{key:{ru:"7",en:"7"},shift:{ru:"?",en:"&"},code:"Digit7",class:"key"},{key:{ru:"8",en:"8"},shift:{ru:"*",en:"*"},code:"Digit8",class:"key"},{key:{ru:"9",en:"9"},shift:{ru:"(",en:"("},code:"Digit9",class:"key"},{key:{ru:"0",en:"0"},shift:{ru:")",en:")"},code:"Digit0",class:"key"},{key:{ru:"-",en:"-"},shift:{ru:"_",en:"_"},code:"Minus",class:"key"},{key:{ru:"=",en:"="},shift:{ru:"+",en:"+"},code:"Equal",class:"key"},{key:{ru:"Backspace",en:"Backspace"},code:"Backspace",class:"key key_backspace",noType:!0}],[{key:{ru:"Tab",en:"Tab"},code:"Tab",class:"key key_tab",noType:!0},{key:{ru:"й",en:"q"},shift:{ru:"Й",en:"Q"},code:"KeyQ",class:"key"},{key:{ru:"ц",en:"w"},shift:{ru:"Ц",en:"W"},code:"KeyW",class:"key"},{key:{ru:"у",en:"e"},shift:{ru:"У",en:"E"},code:"KeyE",class:"key"},{key:{ru:"к",en:"r"},shift:{ru:"К",en:"R"},code:"KeyR",class:"key"},{key:{ru:"е",en:"t"},shift:{ru:"Е",en:"T"},code:"KeyT",class:"key"},{key:{ru:"н",en:"y"},shift:{ru:"Н",en:"Y"},code:"KeyY",class:"key"},{key:{ru:"г",en:"u"},shift:{ru:"Г",en:"U"},code:"KeyU",class:"key"},{key:{ru:"ш",en:"i"},shift:{ru:"Ш",en:"I"},code:"KeyI",class:"key"},{key:{ru:"щ",en:"o"},shift:{ru:"Щ",en:"O"},code:"KeyO",class:"key"},{key:{ru:"з",en:"p"},shift:{ru:"З",en:"P"},code:"KeyP",class:"key"},{key:{ru:"х",en:"["},shift:{ru:"Х",en:"{"},code:"BracketLeft",class:"key"},{key:{ru:"ъ",en:"]"},shift:{ru:"Ъ",en:"}"},code:"BracketRight",class:"key"},{key:{ru:"\\",en:"\\"},shift:{ru:"|",en:"|"},code:"Backslash",class:"key key_backslash"},{key:{ru:"Del",en:"Del"},code:"Delete",class:"key key_del"}],[{key:{ru:"CapsLk",en:"CapsLk"},code:"CapsLock",class:"key key_capslock",noType:!0},{key:{ru:"ф",en:"a"},shift:{ru:"Ф",en:"A"},code:"KeyA",class:"key"},{key:{ru:"ы",en:"s"},shift:{ru:"Ы",en:"S"},code:"KeyS",class:"key"},{key:{ru:"в",en:"d"},shift:{ru:"В",en:"D"},code:"KeyD",class:"key"},{key:{ru:"а",en:"f"},shift:{ru:"А",en:"F"},code:"KeyF",class:"key"},{key:{ru:"п",en:"g"},shift:{ru:"П",en:"G"},code:"KeyG",class:"key"},{key:{ru:"р",en:"h"},shift:{ru:"Р",en:"H"},code:"KeyH",class:"key"},{key:{ru:"о",en:"j"},shift:{ru:"О",en:"J"},code:"KeyJ",class:"key"},{key:{ru:"л",en:"k"},shift:{ru:"Л",en:"K"},code:"KeyK",class:"key"},{key:{ru:"д",en:"l"},shift:{ru:"Д",en:"L"},code:"KeyL",class:"key"},{key:{ru:"ж",en:";"},shift:{ru:"Ж",en:":"},code:"Semicolon",class:"key"},{key:{ru:"э",en:"'"},shift:{ru:"Э",en:'"'},code:"Quote",class:"key"},{key:{ru:"Enter",en:"Enter"},code:"Enter",class:"key key_enter",noType:!0}],[{key:{ru:"Shift",en:"Shift"},code:"ShiftLeft",class:"key key_leftshift",noType:!0},{key:{ru:"я",en:"z"},shift:{ru:"Я",en:"Z"},code:"KeyZ",class:"key"},{key:{ru:"ч",en:"x"},shift:{ru:"Ч",en:"X"},code:"KeyX",class:"key"},{key:{ru:"с",en:"c"},shift:{ru:"С",en:"C"},code:"KeyC",class:"key"},{key:{ru:"м",en:"v"},shift:{ru:"М",en:"V"},code:"KeyV",class:"key"},{key:{ru:"и",en:"b"},shift:{ru:"И",en:"B"},code:"KeyB",class:"key"},{key:{ru:"т",en:"n"},shift:{ru:"Т",en:"N"},code:"KeyN",class:"key"},{key:{ru:"ь",en:"m"},shift:{ru:"Ь",en:"M"},code:"KeyM",class:"key"},{key:{ru:"б",en:","},shift:{ru:"Б",en:"<"},code:"Comma",class:"key"},{key:{ru:"ю",en:"."},shift:{ru:"Ю",en:">"},code:"Period",class:"key"},{key:{ru:".",en:"/"},shift:{ru:",",en:"?"},code:"Slash",class:"key"},{key:{ru:"▲",en:"▲"},code:"ArrowUp",noType:!0,class:"key"},{key:{ru:"Shift",en:"Shift"},code:"ShiftRight",class:"key key_rightshift",noType:!0}],[{key:{ru:"Cntrl",en:"Cntrl"},code:"ControlLeft",class:"key key_leftctrl",noType:!0},{key:{ru:"Win",en:"Win"},code:"MetaLeft",class:"key key_win",noType:!0},{key:{ru:"Alt",en:"Alt"},code:"AltLeft",class:"key key_leftalt",noType:!0},{key:{ru:" ",en:" "},code:"Space",class:"key key_space"},{key:{ru:"Alt",en:"Alt"},code:"AltRight",class:"key key_rightalt",noType:!0},{key:{ru:"◄",en:"◄"},code:"ArrowLeft",noType:!0,class:"key"},{key:{ru:"▼",en:"▼"},code:"ArrowDown",noType:!0,class:"key"},{key:{ru:"►",en:"►"},code:"ArrowRight",noType:!0,class:"key"},{key:{ru:"Cntrl",en:"Cntrl"},code:"ControlRight",class:"key key_rightctrl",noType:!0}]],l={lang:"ru"};JSON.parse("null")?.lang,"ru"===JSON.parse(localStorage.getItem("lang")).lang?l.lang="ru":l.lang="en",window.addEventListener("load",(()=>{const e=[...document.querySelectorAll(".row")];if(localStorage.getItem("lang")){const{lang:t}=JSON.parse(localStorage.getItem("lang"));if("en"===t)for(let t=0;t<s.length;t+=1)for(let n=0;n<e[t].children.length;n+=1)e[t].children[n].textContent=s[t][n].key.en;else for(let t=0;t<s.length;t+=1)for(let n=0;n<e[t].children.length;n+=1)e[t].children[n].textContent=s[t][n].key.ru}})),window.addEventListener("beforeunload",(()=>{const e=JSON.stringify({lang:l.lang});localStorage.setItem("lang",e)}));const c=l;class o extends e{constructor(t,n){super(t,"div","keyboard"),this.textarea=n;for(let t=0;t<s.length;t+=1)this.row=new e(this.element,"div","row"),s[t].forEach((t=>{const{element:n}=new e(this.row.element,"button",t.class);n.textContent=t.key[c.lang],n.addEventListener("click",(e=>{let s=this.textarea.element.selectionStart;const l=this.textarea.element.selectionEnd,c=this.textarea.element,o=this.textarea.element.value.slice(0,s),a=this.textarea.element.value.slice(s),{textContent:r}=e.target;this.textarea.element.focus(),1===r.length&&(s===c.value.length?this.textarea.element.value+=r:(s+=1,this.textarea.element.value=`${o}${r}${a}`,c.setSelectionRange(s,s))),"Enter"===t.code&&(s+=1,this.textarea.element.value=`${o}\n${a}`,c.setSelectionRange(s,s)),"Backspace"===t.code&&(s===l?(s-=1,this.textarea.element.value=`${o.slice(0,-1)}${a}`,c.setSelectionRange(s,s)):(this.textarea.element.value=`${o}${a.slice(l-s)}`,c.setSelectionRange(s,s))),"Delete"===t.code&&(s===l?(this.textarea.element.value=`${o}${a.slice(1)}`,c.setSelectionRange(s,s)):(this.textarea.element.value=`${o}${a.slice(l-s)}`,c.setSelectionRange(s,s))),"Tab"===t.code&&(s+=4,this.textarea.element.value=`${o}    ${a}`,c.setSelectionRange(s,s)),e.target.classList.contains("key_capslock")&&n.classList.toggle("capslk")})),n.addEventListener("mousedown",(e=>{(e.target.classList.contains("key_leftshift")||e.target.classList.contains("key_rightshift"))&&n.classList.add("shift")})),n.addEventListener("mouseup",(e=>{(e.target.classList.contains("key_leftshift")||e.target.classList.contains("key_rightshift"))&&n.classList.remove("shift")})),document.addEventListener("keydown",(e=>{let s=this.textarea.element.selectionStart;const l=this.textarea.element,c=this.textarea.element.value.slice(0,s),o=this.textarea.element.value.slice(s);this.textarea.element.focus(),e.code===t.code&&n.classList.add("active"),e.code===t.code&&1===n.textContent.length&&(e.preventDefault(),s===l.value.length?this.textarea.element.value+=n.textContent:(s+=1,this.textarea.element.value=`${c}${n.textContent}${o}`,l.setSelectionRange(s,s))),"Tab"===e.code&&"Tab"===t.code&&(e.preventDefault(),s+=4,this.textarea.element.value=`${c}    ${o}`,l.setSelectionRange(s,s)),("ArrowUp"===e.code&&"ArrowUp"===t.code||"ArrowLeft"===e.code&&"ArrowLeft"===t.code||"ArrowDown"===e.code&&"ArrowDown"===t.code||"ArrowRight"===e.code&&"ArrowRight"===t.code)&&(e.preventDefault(),s+=1,this.textarea.element.value=`${c}${n.textContent}${o}`,l.setSelectionRange(s,s)),"CapsLock"===e.code&&"CapsLock"===t.code&&n.classList.toggle("capslk")})),document.addEventListener("keyup",(e=>{e.code===t.code&&n.classList.remove("active")}))}))}}var a;new t(document.body),a=new n(document.body),new o(document.body,a),(()=>{const e=[...document.querySelectorAll(".key")],t=document.querySelector(".keyboard"),n=document.querySelector(".key_capslock");t.addEventListener("click",(()=>{e.forEach((e=>{const t=e;1===t.textContent.length&&(n.classList.contains("capslk")?t.textContent=t.textContent.toUpperCase():t.textContent=t.textContent.toLowerCase())}))})),document.addEventListener("keydown",(()=>{e.forEach((e=>{const t=e;1===t.textContent.length&&(n.classList.contains("capslk")?t.textContent=t.textContent.toUpperCase():t.textContent=t.textContent.toLowerCase())}))}))})(),(()=>{const e=[...document.querySelectorAll(".row")],t=document.querySelector(".key_capslock");document.addEventListener("keydown",(n=>{if(n.altKey&&n.ctrlKey){"en"===c.lang?c.lang="ru":c.lang="en";for(let n=0;n<s.length;n+=1)for(let l=0;l<e[n].children.length;l+=1)"ru"===c.lang&&(t.classList.contains("capslk")&&1===e[n].children[l].textContent.length?e[n].children[l].textContent=s[n][l].key.ru.toUpperCase():e[n].children[l].textContent=s[n][l].key.ru),"en"===c.lang&&(t.classList.contains("capslk")&&1===e[n].children[l].textContent.length?e[n].children[l].textContent=s[n][l].key.en.toUpperCase():e[n].children[l].textContent=s[n][l].key.en)}}))})(),(()=>{const e=[...document.querySelectorAll(".row")],t=document.querySelector(".key_leftshift"),n=document.querySelector(".key_rightshift"),l=document.querySelector(".key_capslock");document.addEventListener("mousedown",(()=>{if(t.classList.contains("shift")||n.classList.contains("shift"))for(let t=0;t<s.length;t+=1)for(let n=0;n<e[t].children.length;n+=1)void 0!==s[t][n].shift&&(l.classList.contains("capslk")&&1===e[t].children[n].textContent.length?e[t].children[n].textContent=s[t][n].shift[c.lang].toLowerCase():e[t].children[n].textContent=s[t][n].shift[c.lang])})),document.addEventListener("mouseup",(()=>{if(!t.classList.contains("shift")||!n.classList.contains("shift"))for(let t=0;t<s.length;t+=1)for(let n=0;n<e[t].children.length;n+=1)l.classList.contains("capslk")&&1===e[t].children[n].textContent.length?e[t].children[n].textContent=s[t][n].key[c.lang].toLowerCase():e[t].children[n].textContent=s[t][n].key[c.lang]})),document.addEventListener("keydown",(t=>{if(t.shiftKey)for(let t=0;t<s.length;t+=1)for(let n=0;n<e[t].children.length;n+=1)void 0!==s[t][n].shift&&(l.classList.contains("capslk")&&1===e[t].children[n].textContent.length?e[t].children[n].textContent=s[t][n].shift[c.lang].toLowerCase():e[t].children[n].textContent=s[t][n].shift[c.lang])})),document.addEventListener("keyup",(t=>{if("ShiftLeft"===t.code||"ShiftRight"===t.code)for(let t=0;t<s.length;t+=1)for(let n=0;n<e[t].children.length;n+=1)l.classList.contains("capslk")&&1===e[t].children[n].textContent.length?e[t].children[n].textContent=s[t][n].key[c.lang].toUpperCase():e[t].children[n].textContent=s[t][n].key[c.lang]}))})()})();